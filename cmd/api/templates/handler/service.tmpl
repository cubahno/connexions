{{- $config := .Config -}}
{{- $operations := .Operations -}}
{{- $serviceName := "service" -}}
{{- $receiver := "s" -}}
{{- $packageName := .PackageName -}}
{{- /* Models prefix: when using models-package-alias, model types need prefix */ -}}
{{- $modelsAlias := "" -}}
{{- if and $config.Generate $config.Generate.Handler -}}
{{- $modelsAlias = $config.Generate.Handler.ModelsPackageAlias -}}
{{- end -}}
{{- $modelsPrefix := "" -}}
{{- if $modelsAlias -}}
{{- $modelsPrefix = printf "%s." $modelsAlias -}}
{{- end -}}
// Package {{ $packageName }} This file is generated ONCE as a starting point and will NOT be overwritten.
// Modify it freely to add your business logic.
// To regenerate, delete this file or set generate.handler.output.overwrite: true in config.
package {{ $packageName }}

import (
	"context"

	"github.com/cubahno/connexions/v2/pkg/db"
)

// {{ $serviceName }} implements the ServiceInterface with your business logic.
// Return nil, nil to fall back to the generator for mock responses.
// Return a response to override the generated response.
// Return an error to return an error response.
type {{ $serviceName }} struct {
	db db.DB
}

// Ensure service implements ServiceInterface.
var _ {{ $modelsPrefix }}ServiceInterface = (*{{ $serviceName }})(nil)

// newService creates a new service instance.
// Add your custom initialization logic here.
func newService(serviceDB db.DB) *{{ $serviceName }} {
	return &{{ $serviceName }}{db: serviceDB}
}

{{- range $operations }}{{ $op := . }}

// {{ $op.ID }} handles {{ $op.Method }} {{ $op.Path }}
{{- if and (not $config.Generate.OmitDescription) $op.Summary }}
{{ toGoComment $op.Summary "" }}
{{- end }}
{{- if $op.HasRequestOptions }}
func ({{ $receiver }} *{{ $serviceName }}) {{ $op.ID }}(ctx context.Context, opts *{{ $modelsPrefix }}{{ $op.ID | ucFirst }}ServiceRequestOptions) ({{ if $op.Response.Success }}*{{ $modelsPrefix }}{{ $op.ID | ucFirst }}ResponseData, error{{ else }}error{{ end }}) {
	// TODO: Implement your business logic here.
	// Return nil, nil to use the generated mock response.
	return nil, nil
}
{{- else }}
func ({{ $receiver }} *{{ $serviceName }}) {{ $op.ID }}(ctx context.Context) ({{ if $op.Response.Success }}*{{ $modelsPrefix }}{{ $op.ID | ucFirst }}ResponseData, error{{ else }}error{{ end }}) {
	// TODO: Implement your business logic here.
	// Return nil, nil to use the generated mock response.
	return nil, nil
}
{{- end }}
{{- end }}
