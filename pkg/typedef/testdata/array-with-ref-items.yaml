openapi: 3.0.0
info:
  title: Test Array with $ref Items
  version: 1.0.0
paths:
  /test:
    post:
      requestBody:
        content:
          application/x-www-form-urlencoded:
            encoding:
              spending_controls:
                explode: true
                style: deepObject
            schema:
              type: object
              properties:
                spending_controls:
                  $ref: '#/components/schemas/SpendingControls'
components:
  schemas:
    SpendingControls:
      type: object
      properties:
        spending_limits:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/SpendingLimit'
    SpendingLimit:
      type: object
      properties:
        amount:
          type: integer
        categories:
          type: array
          items:
            type: string
        interval:
          type: string
          enum:
            - daily
            - weekly
            - monthly
      required:
        - amount
        - interval

